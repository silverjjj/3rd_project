<template>
  <v-container>
    <v-stepper v-model="e1" alt-labels class="d-flex flex-column justify-space-between align-center mt-1">
      <h3 v-if="this.e1 < 5" class="pt-2">ì‰¿ğŸ¤..ì •ìˆ˜ë¦¬ ì‹œí—˜ ì¤‘..!!</h3>
      <h3 v-else class="pt-2">ì •ìˆ˜ë¦¬ ì‹œí—˜ ì ìˆ˜ëŠ”..âœ¨ğŸ˜²</h3>
      <v-stepper-items>
        <v-stepper-content step="1" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">ì„¤ë¬¸ì¡°ì‚¬ (1/3)</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            max-width="500px"
            min-width="300px"
          >
            <v-card-text class="pb-1">
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex1" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ê°€ì¡±</span><span class="surbeyNomal">(ì¹œê°€, ì™¸ê°€ ì¡°ë¶€ëª¨/ë¶€ëª¨, í˜•ì œ) ì¤‘ ë¨¸ë¦¬ìˆ±ì´ ì ê±°ë‚˜</span> 
                        <span class="surbeyHighlight"> ëŒ€ë¨¸ë¦¬</span><span class="surbeyNomal">ê°€ ìˆë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex2" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ë³´í†µ ì‚¬ëŒë³´ë‹¤ ê°€ìŠ´, í„±, íŒ”, ë‹¤ë¦¬ ë“±ì— </span>
                        <span class="surbeyHighlight">ì²´ëª¨ê°€ ë§ê³  êµµì€ í¸</span><span class="surbeyNomal">ì´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex3" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ë‘í”¼</span><span class="surbeyNomal">ê°€ ë§ë‘ë§ë‘í•˜ì§€ ì•Šê³  </span><span class="surbeyHighlight">ë”±ë”±í•œ í¸</span>
                        <span class="surbeyNomal">ì´ë‹¤. </span>
                        <span class="surbeyHighlight">ì²´ëª¨ê°€ ë§ê³  êµµì€ í¸</span><span class="surbeyNomal">ì´ë‹¤. </span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex4" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ì •ìˆ˜ë¦¬</span><span class="surbeyNomal">ê°€ ì¢…ì´ê°™ì´ </span>
                        <span class="surbeyHighlight">íŒ½íŒ½í•˜ê³  ë‹¹ê²¨ì§€ëŠ” ëŠë‚Œ</span><span class="surbeyNomal">ì´ ìˆë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex5" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ë‘í”¼</span><span class="surbeyNomal">ê°€ ë”°ê°‘ê³  </span>
                        <span class="surbeyHighlight">ì˜ˆë¯¼</span><span class="surbeyNomal">í•˜ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex6" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ë¨¸ë¦¬ê°€ ìì£¼ </span>
                        <span class="surbeyHighlight">ê°€ë µê³ , ë¹„ë“¬ì´ ë§ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex7" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ìµœê·¼ </span>
                        <span class="surbeyHighlight">ëª¨ë°œ</span>
                        <span class="surbeyNomal">ì´ ê°€ëŠ˜ì–´ì§€ê³  </span>
                        <span class="surbeyHighlight">í˜ì´ ì—†ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row class="pb-0 text-right">
                <v-col class="pb-0 text-right" style="font-family: 'Noto Serif KR', serif; color: gray">ì¶œì²˜: ëŒ€í•œíƒˆëª¨ì¹˜ë£Œí•™íšŒ</v-col>
              </v-row>
            </v-card-text>
          </v-card>
          <div class="text-right">
            <v-btn
              color="primary"
              @click="e1 = 2"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>
        </v-stepper-content>
  
        <v-stepper-content step="2" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">ì„¤ë¬¸ì¡°ì‚¬ (2/3)</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
          >
            <v-card-text class="pb-1">
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex8" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ë¨¸ë¦¬ë¥¼ ê°ì„ ë•Œ </span>
                        <span class="surbeyHighlight">ë¨¸ë¦¬ì¹´ë½ì´ ë§ì´ ë¹ ì§€ê³ </span>
                        <span class="surbeyNomal"> ë¨¸ë¦¬ìˆ±ì´ ì—†ì–´ ë³´ì¸ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex9" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ë‘í”¼ ìƒ‰</span>
                        <span class="surbeyNomal">ì´ </span>
                        <span class="surbeyHighlight">ë¶‰ê±°ë‚˜ ë¾°ë£¨ì§€</span>
                        <span class="surbeyNomal">ê°€ ìì£¼ ìƒê¸´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex10" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ë‘í”¼ì— </span>
                        <span class="surbeyHighlight">ê¸°ë¦„(ì§€ì„±, ì§€ë£¨ì„±, ëƒ„ìƒˆ)ì´ ë§ì´ ìƒê¸´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex11" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë§ì€ ì¼ì„ í•˜ê³ , </span>
                        <span class="surbeyHighlight">ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ìœ¼ë©´ ì˜ í’€ì§€ ëª»í•œë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex12" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ìˆ ì„ ìì£¼</span>
                        <span class="surbeyNomal"> ë§ˆì‹ ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex13" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyNomal">í”¼ë¡œë¥¼ ìì£¼ ëŠë¼ê³  </span>
                        <span class="surbeyHighlight">ëª©ê³¼ ë“± ê·¼ìœ¡ì´ ë»ê·¼</span>
                        <span class="surbeyNomal">í•˜ë©° ì˜ í’€ë¦¬ì§€ ì•ŠëŠ”ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex14" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ì—¼ìƒ‰</span>
                        <span class="surbeyNomal">ì„ </span>
                        <span class="surbeyHighlight">ìì£¼</span>
                        <span class="surbeyNomal"> í•œë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row class="pb-0 text-right">
                <v-col class="pb-0 text-right" style="font-family: 'Noto Serif KR', serif; color: gray">ì¶œì²˜: ëŒ€í•œíƒˆëª¨ì¹˜ë£Œí•™íšŒ</v-col>
              </v-row>
            </v-card-text>
          
          </v-card>
          <div class="text-right">
            <v-btn 
              @click="e1 = 1"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ì´ ì „
            </v-btn>
            <v-btn
              color="primary"
              @click="e1 = 3"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>
        </v-stepper-content>
  
        <v-stepper-content step="3" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">ì„¤ë¬¸ì¡°ì‚¬ (3/3)</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
          >
            <v-card-text class="pb-1">
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex15" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div class="surbeyHighlight">
                        <span class="surbeyNomal">í‰ì†Œ </span>
                        <span class="surbeyHighlight">ì ¤ê³¼ ìŠ¤í”„ë ˆì´</span>
                        <span class="surbeyNomal"> ë“±ì„ ë§ì´ ì‚¬ìš©í•œë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex16" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ì¸ìŠ¤í„´íŠ¸ ìŒì‹</span>
                        <span class="surbeyNomal">ì´ë‚˜ íŒ¨ìŠ¤íŠ¸í‘¸ë“œë¥¼ </span>
                        <span class="surbeyHighlight">ìì£¼ ë¨¹ëŠ”ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex17" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ë©´ë¥˜ë‚˜ ê¸°ë¦„ê¸°</span>
                        <span class="surbeyNomal"> ìˆëŠ” ìŒì‹ì„ ì¦ê¸´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex18" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">í•´ì¡°ë¥˜ì™€ ì±„ì†Œ, ê³¼ì¼ì„ ê±°ì˜ ë¨¹ì§€ ì•ŠëŠ”ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex19" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ë§¤ì¼ ë‹´ë°°</span>
                        <span class="surbeyNomal">ë¥¼ í”¼ìš´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row>
                <v-col>
                  <v-checkbox 
                    v-model="checkbox_result.ex20" 
                    hide-details
                  >
                    <template v-slot:label>
                      <div>
                        <span class="surbeyHighlight">ìƒí™œì´ ë¶ˆê·œì¹™ì </span>
                        <span class="surbeyNomal">ì´ê³  ë°¤ëŠ¦ê²Œê¹Œì§€ ì ì„ ëª»ìê³  </span>
                        <span class="surbeyHighlight">ìˆ˜ë©´ëŸ‰ì´ ì ì€ í¸</span>
                        <span class="surbeyNomal">ì´ë‹¤.</span>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>
              <v-row class="pb-0 text-right">
                <v-col class="pb-0 text-right" style="font-family: 'Noto Serif KR', serif; color: gray">ì¶œì²˜: ëŒ€í•œíƒˆëª¨ì¹˜ë£Œí•™íšŒ</v-col>
              </v-row>
            </v-card-text>
          </v-card>
          <div class="text-right">
            <v-btn 
              @click="e1 = 2"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ì´ ì „
            </v-btn>
            <v-btn
              color="primary"
              @click="e1 = 4"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>
        </v-stepper-content>


        <v-stepper-content step="4" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">AI ì¹´ë©”ë¼ (1/1)</div>
          <!-- ì‚¬ì§„ ì—…ë¡œë“œ ì•ˆí–ˆì„ ë•Œ -->
          <v-card
            class="mb-12"
            color="brown lighten-5"
            v-if="!imageUrl" 
          >
            <v-card-text>
              <v-row
                align="center"
                justify="center"
                class="mx-2 mt-3"
              > 
                <v-col justify="center" align="center" class="mx-0">
                  <span class="surbeyHighlight" style="font-size: x-large">ì •ìˆ˜ë¦¬</span>
                  <span class="surbeyNomal" style="font-size: large"> ë˜ëŠ”</span>
                  <span class="surbeyHighlight" style="font-size: x-large"> ì´ë§ˆê°€ ë“œëŸ¬ë‚œ ì‚¬ì§„</span>
                  <span class="surbeyNomal" style="font-size: large">ì„</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col justify="center" align="center" class="pt-0">
                  <span class="surbeyNomal" style="font-size: large"> ì˜¬ë ¤ì£¼ì„¸ìš”!</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col
                  align="center" 
                  justify="center"
                >
                  <input ref="imageInput" type="file" hidden @change="onChangeImages">
                  <v-img
                    src="../../assets/11.png"
                    class="testSample"
                    @click="onClickImageUpload"
                    style="cursor:pointer;"
                    width="200px"
                  ></v-img>                   
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-center my-3">
                  <span class="surbeyNomal" style="font-size: large;">ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</span>   
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-right">
                  <span style="font-family: 'Gamja Flower', cursive; font-size: large; font-weight: bold;">ë‹¨, íŒŒì¼ëª…ì— í•œê¸€ì´ ìˆìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤.</span>
                </v-col>
              </v-row>
            </v-card-text>
          </v-card>

          <div 
            v-if="!imageUrl" 
            class="text-right"
          >
            <v-btn
              color="primary"
              disabled
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>

          <!-- ì‚¬ì§„ ì—…ë¡œë“œ í›„ -->
          <v-card
            class="mb-12"
            color="brown lighten-5"
            v-if="imageUrl" 
          >
            <v-card-text>
              <v-row
                align="center"
                justify="center"
                class="mx-2 mt-3"
              > 
                <v-col justify="center" align="center">
                  <span class="surbeyHighlight" style="font-size: x-large">ì •ìˆ˜ë¦¬</span>
                  <span class="surbeyNomal" style="font-size: large"> ë˜ëŠ”</span>
                  <span class="surbeyHighlight" style="font-size: x-large"> ì´ë§ˆê°€ ë“œëŸ¬ë‚œ ì‚¬ì§„</span>
                  <span class="surbeyNomal" style="font-size: large">ì„</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col justify="center" align="center" class="pt-0">
                  <span class="surbeyNomal" style="font-size: large"> ì˜¬ë ¤ì£¼ì„¸ìš”!</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col
                  align="center" 
                  justify="center"
                >
                  <v-img 
                    :src="imageUrl" 
                    cover
                    @click="onClickImageUpload" 
                    style="cursor:pointer;"
                    width="200px"
                  >
                  </v-img>
                  <input ref="imageInput" type="file" hidden @change="onChangeImages">               
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-center my-3">
                  <span class="surbeyNomal" style="font-size: large">ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</span>   
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-right">
                  <span style="font-family: 'Gamja Flower', cursive; font-size: large; font-weight: bold;">ë‹¨, íŒŒì¼ëª…ì— í•œê¸€ì´ ìˆìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤.</span>
                </v-col>
              </v-row>
            </v-card-text>
          </v-card>

          <div 
            v-if="imageUrl" 
            class="text-right"
          >
            <v-btn
              color="primary"
              @click="upload"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>
        </v-stepper-content>


        <v-stepper-content step="5" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">ì±„ì ì¤‘..</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            v-if="imageUrl" 
          >
            <v-card-text>
              <v-row
                align="center"
                justify="center"
                class="mx-2 mt-3"
              > 
                <v-col justify="center" align="center">
                  <span class="surbeyHighlight" style="font-size: x-large">ì •ìˆ˜ë¦¬</span>
                  <span class="surbeyNomal" style="font-size: large"> ë˜ëŠ”</span>
                  <span class="surbeyHighlight" style="font-size: x-large"> ì´ë§ˆê°€ ë“œëŸ¬ë‚œ ì‚¬ì§„</span>
                  <span class="surbeyNomal" style="font-size: large">ì„</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col justify="center" align="center" class="pt-0">
                  <span class="surbeyNomal" style="font-size: large"> ì˜¬ë ¤ì£¼ì„¸ìš”!</span>
                </v-col>
              </v-row>
              <v-row>
                <v-col
                  align="center" 
                  justify="center"
                >
                  <v-img 
                    :src="imageUrl" 
                    cover
                    style="cursor:pointer;"
                    width="200px"
                  >
                    <div class="text-center">
                      <v-progress-circular
                        :size="130"
                        :width="15"
                        color="primary"
                        indeterminate
                      >ì±„ì ì¤‘</v-progress-circular>
                    </div>
                  </v-img>             
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-center my-3">
                  <span class="surbeyNomal" style="font-size: large">ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</span>   
                </v-col>
              </v-row>
              <v-row>
                <v-col class="text-right">
                  <span style="font-family: 'Gamja Flower', cursive; font-size: large; font-weight: bold;">ë‹¨, íŒŒì¼ëª…ì— í•œê¸€ì´ ìˆìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤.</span>
                </v-col>
              </v-row>
            </v-card-text>
          </v-card>

          <div 
            v-if="imageUrl" 
            class="text-right"
          >
            <v-btn
              color="primary"
              disabled
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ ìŒ
            </v-btn>
          </div>
        </v-stepper-content>
        <v-stepper-content step="6" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">í…ŒìŠ¤íŠ¸ ê²°ê³¼(1/2)</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            min-width="300"
          >
            <v-card-text
              class="px-4 text-center"
            > 
              <v-card
                class="mx-auto"
                max-width="300"
                min-width="300"
              >
                <v-toolbar
                  color="blue darken-3"
                  dark
                > 
                  <v-col style="font-family: 'Jua', sans-serif; font-size: x-large">ì •ìˆ˜ë¦¬ëŠ¥ë ¥ì‹œí—˜ ì„±ì í†µì§€í‘œ</v-col>
                </v-toolbar>
                <v-row style="margin: auto;">
                  <v-col cols="3" 
                    class="pb-0 pl-0 pr-0 pt-0" 
                    style="border-top-style: solid; border-top-color: white; 
                          border-bottom-style: solid; border-bottom-color: white; color: white;
                          border-right-style: solid;
                          border-right-color:white;"
                  >

                    <v-img 
                      :src="imageUrl" 
                      cover
                      style="cursor:pointer;"
                      min-width="64px"
                      max-height="95px"
                      height="100%"
                    ></v-img>  

                  </v-col>
                  <v-col cols="9" class="pb-0 pl-0 pr-0 pt-0">
                    <v-row style="margin: auto; background-color: gray;">
                      <v-col 
                        class="resultText" 
                        style="border-top-style: solid; border-top-color: white; border-bottom-style: solid; border-bottom-color: white; color: white;">
                        ë‹‰ë„¤ì„
                      </v-col>
                    </v-row>
                    <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                      <v-col class="resultText" style="background-color: lightgray;">{{ nickname }}</v-col>
                    </v-row>
                  </v-col>
                </v-row>
                <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                  <v-col cols="3" class="resultBorder">êµ¬ë¶„</v-col>
                  <v-col class="resultText" style="background-color: lightgray;">ì •ìˆ˜ë¦¬ ì˜ì—­</v-col>
                </v-row>
                <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                  <v-col cols="3" class="resultBorder">ì ìˆ˜</v-col>
                  <v-col class="resultText" style="background-color: lightgray;">{{ result }} ì </v-col>
                </v-row>
                <v-row style="margin: auto;">
                  <v-col cols="3" class="resultBorder">ë“±ê¸‰</v-col>
                  <v-col class="resultText" style="background-color: lightgray;">{{ grade }} ë“±ê¸‰</v-col>
                </v-row>
              </v-card>
              <v-row>
                <v-col class="pb-0 pt-5" style="font-family: 'Jua', sans-serif; font-size: large;">{{ this.nowDate }}</v-col>
              </v-row>
              <v-row class="mb-5">
                <v-col class="pt-0" style="font-family: 'Jua', sans-serif; font-size: large;">ì •ìˆ˜ë¦¬ì˜ì—­í‰ê°€ì›ì¥</v-col>
              </v-row>
              <v-row v-if="grade < 4" class="gradeResult1 text-left" style="margin: auto;">                
                <v-col cols="4">
                  <v-row><v-col class="pr-0 pb-0" style="font-size: x-large; color: white">3ë“±ê¸‰ ì´í•˜</v-col></v-row>
                  <v-row><v-col class="pr-0 pt-1" style="font-size: large;">ì•„ì§ ì•ˆì „í•œ ë‹¨ê³„</v-col></v-row>
                </v-col>
                <v-col cols="8">
                  <span style="font-size: large; color: white">ë‘í”¼ë¥¼ ì²­ê²°í•˜ê²Œ ìœ ì§€</span>
                  <span style="font-size: large;">í•˜ê³  ì¢‹ì€ ìƒí™œ ìŠµê´€ì„ í†µí•´ íƒˆëª¨ë¥¼ ì˜ˆë°©í•˜ì„¸ìš”.</span>
                </v-col>
              </v-row>
              <v-row v-else-if="grade < 7" class="gradeResult2 text-left" style="margin: auto;"> 
                <v-col cols="4">
                  <v-row><v-col class="pr-0 pb-0" style="font-size: x-large; color: white">4~6ë“±ê¸‰</v-col></v-row>
                  <v-row><v-col class="pr-0 pt-1" style="font-size: large;">íƒˆëª¨ ì´ˆê¸° ì¦ìƒ</v-col></v-row>
                </v-col>
                <v-col cols="8">
                  <span style="font-size: large;">ë¹¨ë¦¬ ì „ë¬¸ì ì¸ ì§„ë£Œë¥¼ ë°›ì•„ </span>  
                  <span style="font-size: large; color: white">ì ê·¹ì ì¸ íƒˆëª¨/íˆ¬í”¼ ì¹˜ë£Œ</span>
                  <span style="font-size: large;">ë¥¼ ë°›ìœ¼ì…”ì•¼ ì¡°ê¸° ì˜ˆë°©, ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                </v-col>
              </v-row>
              <v-row v-else-if="grade < 10" class="gradeResult3 text-left" style="margin: auto;">
                <v-col cols="4">
                  <v-row><v-col class="pr-0 pb-0" style="font-size: x-large; color: white">7ë“±ê¸‰ ì´ìƒ</v-col></v-row>
                  <v-row><v-col class="pr-0 pt-1" style="font-size: large;">íƒˆëª¨ ì§„í–‰ ì¤‘</v-col></v-row>
                </v-col>
                <v-col cols="8">
                  <span style="font-size: large;">ì •í™•í•œ ì§„ë‹¨ í›„ </span>
                  <span style="font-size: large; color: white">íƒˆëª¨ ì „ë¬¸ ì¹˜ë£Œ</span>
                  <span style="font-size: large;">ë¥¼ ë°›ìœ¼ì…”ì•¼ ë” ì´ìƒì˜ ì•…í™” í˜„ìƒì„ ë°›ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                </v-col>
              </v-row>
            </v-card-text>
          </v-card>
          <div 
            v-if="imageUrl" 
            class="text-right"
          >
            <v-btn
              class="mb-1"
              color="primary"
              @click="e1 = 7"
              style="margin-right: 10px; font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë¯¸ë˜ ì˜ˆìƒ
            </v-btn>
          </div>
        </v-stepper-content>
        <v-stepper-content step="7" class="pt-1">
          <div class="pt-1 pb-4 text-right surbeyTitle">í…ŒìŠ¤íŠ¸ ê²°ê³¼(2/2)</div>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            min-width="300"
            v-if="grade < 4"
          >
            <v-card-text
              class="px-4 text-center"
            > 
              <v-card
                class="mx-auto"
                max-width="400"
              >
                <v-toolbar
                  color="blue darken-3"
                  dark
                > 
                  <v-col style="font-family: 'Jua', sans-serif; font-size: x-large">{{ grade }}ë“±ê¸‰ì˜ ì˜ˆìƒ ì¦ëª…ì‚¬ì§„</v-col>
                </v-toolbar>
                <v-row style="margin: auto;">
                  <v-img 
                    src="../../assets/hairloss4.gif" 
                    cover
                    style="cursor:pointer;"
                    min-width="64px"
                    max-height="500px"
                  ></v-img>
                  <v-col cols="12" class="pb-0 pl-0 pr-0 pt-0">
                    <v-row style="margin: auto; background-color: gray;">
                      <v-col 
                        class="resultText" 
                        style="border-bottom-style: solid; border-bottom-color: white; color: white;">
                        ë‹‰ë„¤ì„
                      </v-col>
                    </v-row>
                    <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                      <v-col class="resultText" style="background-color: lightgray;">{{ nickname }}</v-col>
                    </v-row>
                  </v-col>
                </v-row>
              </v-card>
            </v-card-text>
          </v-card>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            min-width="300"
            v-else-if="grade < 7"
          >
            <v-card-text
              class="px-4 text-center"
            > 
              <v-card
                class="mx-auto"
                max-width="400"
              >
                <v-toolbar
                  color="blue darken-3"
                  dark
                > 
                  <v-col style="font-family: 'Jua', sans-serif; font-size: x-large">{{ grade }}ë“±ê¸‰ì˜ ì˜ˆìƒ ì¦ëª…ì‚¬ì§„</v-col>
                </v-toolbar>
                <v-row style="margin: auto;">
                  <v-img 
                    src="../../assets/hairloss5.gif" 
                    cover
                    style="cursor:pointer;"
                    min-width="64px"
                    max-height="500px"
                  ></v-img>
                  <v-col cols="12" class="pb-0 pl-0 pr-0 pt-0">
                    <v-row style="margin: auto; background-color: gray;">
                      <v-col 
                        class="resultText" 
                        style="border-bottom-style: solid; border-bottom-color: white; color: white;">
                        ë‹‰ë„¤ì„
                      </v-col>
                    </v-row>
                    <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                      <v-col class="resultText" style="background-color: lightgray;">{{ nickname }}</v-col>
                    </v-row>
                  </v-col>
                </v-row>
              </v-card>
            </v-card-text>
          </v-card>
          <v-card
            class="mb-12"
            color="brown lighten-5"
            min-width="300"
            v-else-if="grade < 10"
          >
            <v-card-text
              class="px-4 text-center"
            > 
              <v-card
                class="mx-auto"
                max-width="400"
              >
                <v-toolbar
                  color="blue darken-3"
                  dark
                > 
                  <v-col style="font-family: 'Jua', sans-serif; font-size: x-large">{{ grade }}ë“±ê¸‰ì˜ ì˜ˆìƒ ì¦ëª…ì‚¬ì§„</v-col>
                </v-toolbar>
                <v-row style="margin: auto;">
                  <v-img 
                    src="../../assets/hairloss6.gif" 
                    cover
                    style="cursor:pointer;"
                    min-width="64px"
                    max-height="500px"
                  ></v-img>
                  <v-col cols="12" class="pb-0 pl-0 pr-0 pt-0">
                    <v-row style="margin: auto; background-color: gray;">
                      <v-col 
                        class="resultText" 
                        style="border-bottom-style: solid; border-bottom-color: white; color: white;">
                        ë‹‰ë„¤ì„
                      </v-col>
                    </v-row>
                    <v-row style="margin: auto; border-bottom-style: solid; border-bottom-color: white;">
                      <v-col class="resultText" style="background-color: lightgray;">{{ nickname }}</v-col>
                    </v-row>
                  </v-col>
                </v-row>
              </v-card>
            </v-card-text>
          </v-card>
          <div 
            v-if="imageUrl" 
            class="text-right"
          >
            <v-btn 
              class="mr-4 mb-1"
              @click="reset()"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
            >
              ë‹¤ì‹œí•˜ê¸°
            </v-btn>
            <v-btn
              class="mb-1"
              color="primary"
              style="font-family: 'Gothic A1', sans-serif; font-size: small; font-weight: bold;"
              @click="e1 = 6"
            >
              ì´ ì „
            </v-btn>
          </div>
        </v-stepper-content>          
      </v-stepper-items>
    </v-stepper>
  </v-container>
</template>

<script>
import axios from 'axios'

export default {
  data () {
    return {
      // count: this.$route.params.count,
      files: [],
      imageUrl: '',
      selected: false,
      result: 100,
      searched: false,
      score: 0,
      uploadId: null,
      nowDate: null,
      nickname: null,
      grade: 1,
      isloading: false,
      //
      e1: 1,
      page: 1,
      checkbox: true,
      checkbox_result: {
        "ex1" : false,
        "ex2" : false,
        "ex3" : false,
        "ex4" : false,
        "ex5" : false,
        "ex6" : false,
        "ex7" : false,
        "ex8" : false,
        "ex9" : false,
        "ex10" : false,
        "ex11" : false,
        "ex12" : false,
        "ex13" : false,
        "ex14" : false,
        "ex15" : false,
        "ex16" : false,
        "ex17" : false,
        "ex18" : false,
        "ex19" : false,
        "ex20" : false,
      },
      count: 0,
    }
  },
  created() {
    let today = new Date();
    let year = today.getFullYear()
    let month = today.getMonth() + 1
    let date = today.getDate()

    this.nowDate = `${year}.${month}.${date}`
    const token = sessionStorage.getItem('token')
    axios.get(`${process.env.VUE_APP_BACKEND_URL}/api/accounts/user/`, 
      {
        headers: {Authorization: `token ${token}`}
      }
    )
    .then((re) => {
      this.user_id = re.data.id
      this.nickname = re.data.nickname
    })
    .catch(() => {})
  },
  methods: {
    clickSubmit() {
      // apië¡œ ê²°ê³¼ post
      // ë¦¬í„´ëœ ê°’ì„
      for (let key in this.checkbox_result) {
        if (this.checkbox_result[key] === true) {
          this.count += 1
        }
      }
    },
    clickNext() {
      this.page += 1
    },
    clickPrevious() {
      this.page -= 1
    },
    reset() {
      this.$router.push({ name: 'InitSurvey'})
    },

    upload() {
      this.clickSubmit()
      this.isloading = true
      this.searched = true
      this.e1 = 5
      this.score = parseInt((210-(this.count * (this.count +1)) / 2) * (5/21))
      let fd = new FormData();
      fd.append('files', this.files)
      let token = sessionStorage.getItem('token')
      axios.post('/api/api/images/analyze-image/',
        fd, {
          headers: {
            'Content-Type': 'multipart/form-data',
            'Authorization': `token ${token}`,
          }
        }
      ).
      then((res) => {
        // console.log('upload res', res)
        this.result = parseInt((100-res.data.result)/2) + this.score
        this.searched = true
        this.isloading = false
        this.e1 = 6
        this.uploadId = res.data.image.id
        if (this.result == 100) {
          this.grade = 1
        } else if (this.result < 10) {
          this.grade = 9
        } else {
          this.grade = 10 - parseInt(this.result / 10)
        }
        this.saveResult()
      })
      .catch(() => {
        
        this.e1 = 4
        alert('íŒŒì¼ëª…ì´ í•œê¸€ì…ë‹ˆë‹¤. ì˜ì–´ë¡œ ë³€ê²½í•´ ì£¼ì„¸ìš”.')
      });
    },
    saveResult() {
      let token = sessionStorage.getItem('token')
      axios.post('/api/api/images/save-score/', {'image': this.uploadId, 'score': this.result}, {
        headers: {
          'Authorization': `token ${token}`,
        }
      })
        .then(() => {
          // console.log('saveResult', res)
        })
    },
    onClickImageUpload() {
      this.selected = true
      this.$refs.imageInput.click()
    },
    onChangeImages(e) {
      this.files = e.target.files[0]
      let nameLength = e.target.files[0].name.length
      let verifyFile = e.target.files[0].name.slice(nameLength-3, nameLength) 
      if (verifyFile == 'PNG' || verifyFile == 'jpg' || verifyFile == 'png' || verifyFile == 'JPG') {
        this.imageUrl = URL.createObjectURL(this.files)
      } else {
        alert('jpg ë˜ëŠ” PNG íŒŒì¼í˜•ì‹ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.')
        return false
      }
    },
  },
}
</script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR&family=Do+Hyeon&family=Nanum+Gothic&family=Noto+Sans+KR:wght@900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

.surbeyHighlight {
  color:#FFAB00;
  font-family: 'Do Hyeon', sans-serif;

}

.surbeyNomal {
  font-family: 'Do Hyeon', sans-serif;
}

.surbeyTitle {
font-family: 'Noto Sans KR', sans-serif;
font-weight: 900;
}

.testSample {
  border: 3px solid gold;
  border-radius: 220px;
  -moz-border-radius: 220px;
  -khtml-border-radius: 220px;
  -webkit-border-radius: 220px;
}

.resultBorder {
  margin: auto;
  border-right-style: solid;
  border-right-color:white;
  width: 20px !important;
  background-color: gray;
  color: white;
  font-family: 'Jua', sans-serif;
  font-size: large
}

.resultText {
  font-family: 'Jua', sans-serif;
  font-size: large;
}

.gradeResult1 {
  background-color: #ffbe73;
  align-items: center;
  font-family: 'Jua', sans-serif;
  max-width: 400px;
}

.gradeResult2 {
  background-color: #fd9463;
  align-items: center;
  font-family: 'Jua', sans-serif;
  max-width: 400px;
}

.gradeResult3 {
  background-color: #ff5953;
  align-items: center;
  font-family: 'Jua', sans-serif;
  max-width: 400px;
}

.v-progress-circular {
  margin: 1rem;
}

.v-progress-circular__info {
  /* color: rgb(0, 16, 85); */
  color: white;
  font-weight: 550;
  font-size: xx-large;
  font-family: 'Jua', sans-serif;
}


</style>